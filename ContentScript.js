function d(t,o,n){return n?fetch(t+"?"+new URLSearchParams(n),{...o}):fetch(t,{...o})}function l(){let t=localStorage.getItem("token");return t||""}const s=chrome.runtime.connect({name:"ednv3"});s.onMessage.addListener(async function(t,o){const n=t.command,e=t.fetchConfigs;if(n){let a;switch(console.info("Command: ",n),n){case"get_token":a={data:l(),ok:!0},s.postMessage(a);break;case"make_request":if(e!=null&&e.url&&(e!=null&&e.configs)){const c=e.configs,r=e.url,i=e.params;console.log(`  - ${c.method}: ${r}`);const m=await d(r,c,i);let u={data:await m.json(),ok:m.ok};s.postMessage(u)}}}});
